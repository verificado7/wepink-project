<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>wepink :: Admin</title>
  <meta name="description" content="Painel de administração da WePink para gerenciar produtos e pedidos.">
  <meta name="copyright" content="WePink">
  <meta name="author" content="WePink">
  <meta name="country" content="BRA">
  <meta name="language" content="pt-BR">
  <link rel="icon" href="/img/we.png" type="image/png">
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #fff;
    }
    header, footer, section { padding: 20px; }
    .header-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      background-color: #fff;
      position: relative;
    }
    .header-bar .logo-text {
      font-weight: bold;
      font-size: 1.5rem;
      color: #ff2e82;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
    }
    .header-icons { display: flex; gap: 10px; }
    .header-icons svg { width: 24px; height: 24px; stroke: #000; stroke-width: 2; }
    .header-icons a { text-decoration: none; }
    .menu-icon { background: none; border: none; cursor: pointer; }
    .menu-icon svg { width: 24px; height: 24px; stroke: #000; stroke-width: 2; }
    .admin-panel { max-width: 1200px; margin: 0 auto; }
    .admin-panel h2 { color: #ff2e82; font-size: 1.5rem; margin-bottom: 20px; }
    .stats { display: flex; gap: 20px; margin-bottom: 40px; }
    .stat-card { background: #f5f5f5; padding: 20px; border-radius: 8px; flex: 1; text-align: center; }
    .stat-card h3 { font-size: 1.2rem; margin-bottom: 10px; }
    .stat-card p { font-size: 1.5rem; font-weight: bold; color: #ff2e82; }
    .product-list { margin-bottom: 40px; }
    .product-list h2 { margin-bottom: 20px; }
    .product-table { width: 100%; border-collapse: collapse; }
    .product-table th, .product-table td { padding: 10px; border: 1px solid #ddd; text-align: left; }
    .product-table th { background-color: #f5f5f5; font-weight: bold; }
    .product-table img { max-width: 50px; height: auto; }
    .product-table button { background: #ff2e82; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; }
    .orders h2 { margin-bottom: 20px; }
    .order-table { width: 100%; border-collapse: collapse; }
    .order-table th, .order-table td { padding: 10px; border: 1px solid #ddd; text-align: left; }
    .order-table th { background-color: #f5f5f5; font-weight: bold; }
    .order-table img { max-width: 50px; height: auto; }
    .order-table button { background: #ff2e82; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; }
    .button { background: #ff2e82; color: white; padding: 10px 20px; border: none; border-radius: 8px; text-decoration: none; display: inline-block; margin: 10px 0; font-weight: bold; }
    footer {
      background-color: #ff2e82;
      color: #fff;
      text-align: center;
      padding: 20px;
    }
    .footer-info p { font-size: 0.8rem; margin: 5px 0; }
    @media (max-width: 600px) {
      .stats { flex-direction: column; }
      .stat-card { flex: none; }
      .product-table, .order-table { font-size: 0.9rem; }
      .product-table img, .order-table img { max-width: 40px; }
    }
  </style>
</head>
<body>
  <!-- Cabeçalho -->
  <div class="header-bar">
    <button class="menu-icon">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
    <div class="logo-text">wepink</div>
    <div class="header-icons">
      <a href="index.html">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
        </svg>
      </a>
    </div>
  </div>

  <!-- Painel de Administração -->
  <section class="admin-panel">
    <h2>Painel de Administração</h2>

    <!-- Estatísticas -->
    <div class="stats">
      <div class="stat-card">
        <h3>Usuários Ativos</h3>
        <p id="active-users">0</p>
      </div>
      <div class="stat-card">
        <h3>Pedidos Pendentes</h3>
        <p id="pending-orders">0</p>
      </div>
      <div class="stat-card">
        <h3>Receita Total</h3>
        <p id="total-revenue">R$ 0,00</p>
      </div>
    </div>

    <!-- Lista de Produtos -->
    <div class="product-list">
      <h2>Produtos Cadastrados</h2>
      <button class="button" onclick="showAddProductModal()">Adicionar Produto</button>
      <table class="product-table">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Imagem</th>
            <th>Descrição</th>
            <th>Preço Antigo</th>
            <th>Preço Novo</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody id="product-table-body"></tbody>
      </table>
    </div>

    <!-- Lista de Pedidos -->
    <div class="orders">
      <h2>Pedidos</h2>
      <table class="order-table">
        <thead>
          <tr>
            <th>ID do Pedido</th>
            <th>Cliente</th>
            <th>Produto</th>
            <th>Valor</th>
            <th>Status</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody id="order-table-body"></tbody>
      </table>
    </div>
  </section>

  <!-- Modal para Adicionar/Editar Produto -->
  <div id="product-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center;">
    <div style="background: white; padding: 20px; border-radius: 8px; width: 90%; max-width: 500px;">
      <h3 id="modal-title">Adicionar Produto</h3>
      <form id="product-form">
        <label>ID:</label>
        <input type="text" id="product-id" required><br>
        <label>Nome:</label>
        <input type="text" id="product-name" required><br>
        <label>Descrição:</label>
        <input type="text" id="product-description" required><br>
        <label>Descrição Completa:</label>
        <textarea id="product-full-description" required></textarea><br>
        <label>Notas Olfativas:</label>
        <textarea id="product-notes" required></textarea><br>
        <label>Preço Antigo:</label>
        <input type="number" id="product-price-old" step="0.01" required><br>
        <label>Preço Novo:</label>
        <input type="number" id="product-price-new" step="0.01" required><br>
        <label>Parcelas (por unidade):</label>
        <input type="number" id="product-installments" step="0.01" required><br>
        <label>Imagem (URL):</label>
        <input type="text" id="product-image" required><br>
        <label>Taxas de Entrega (SP - Opção 1):</label>
        <input type="number" id="delivery-sp-option1" step="0.01" required><br>
        <label>Taxas de Entrega (SP - Opção 2):</label>
        <input type="number" id="delivery-sp-option2" step="0.01" required><br>
        <label>Taxas de Entrega (Sudeste - Opção 1):</label>
        <input type="number" id="delivery-southeast-option1" step="0.01" required><br>
        <label>Taxas de Entrega (Sudeste - Opção 2):</label>
        <input type="number" id="delivery-southeast-option2" step="0.01" required><br>
        <label>Taxas de Entrega (Outros - Opção 1):</label>
        <input type="number" id="delivery-other-option1" step="0.01" required><br>
        <label>Taxas de Entrega (Outros - Opção 2):</label>
        <input type="number" id="delivery-other-option2" step="0.01" required><br>
        <button type="submit" class="button">Salvar</button>
        <button type="button" class="button" onclick="closeModal()">Cancelar</button>
      </form>
    </div>
  </div>

  <!-- Rodapé -->
  <footer>
    <div class="footer-info">
      <p>Política de Privacidade | Termos de Uso</p>
      <p>Todos os direitos reservados © 2025 | SAVI COSMÉTICOS LTDA | CNPJ: 42.422.967/0001-01</p>
    </div>
  </footer>

  <script>
    // Dados padrão dos produtos (sincronizados com index.html)
    const defaultProducts = [
      {
        id: "onetouch",
        name: "One Touch Silk Desodorante Colônia 100ml - Wepink",
        description: "exale delicadeza e doçura com um toque que encanta",
        fullDescription: "Sinta um toque delicado de carinho com o Desodorante Colônia Wepink One Touch Silk, um aroma alegre que revive a essência de um romance. Sua fragrância Floral e Frutada inicia no charme da Bergamota e no frescor do Morango, evoluindo em um coração floral encantador. Finaliza em um fundo doce e suave de Baunilha, florescendo a essência feminina inesquecível.",
        notes: "Notas de topo: Bergamota e Morango<br>Notas de coração: Floral<br>Notas de fundo: Baunilha",
        priceOld: 1000.00,
        priceNew: 350.00,
        installmentsPerUnit: 58.33,
        image: "/img/onetouch.png",
        deliveryFees: {
          sp: { option1: 3.00, option2: 4.00 },
          southeast: { option1: 5.00, option2: 6.00 },
          other: { option1: 7.00, option2: 8.00 }
        }
      },
      {
        id: "liberte",
        name: "Liberté Desodorante Colônia 100ml - Wepink",
        description: "Transborde a sua essência mais nobre.",
        fullDescription: "Liberté Desodorante Colônia Wepink é uma fragrância que reflete liberdade e sofisticação. Com notas florais orientais, inicia com um toque cítrico de Mandarina e Pêra, evoluindo para um coração de Jasmim e Flor de Laranjeira, e finalizando com um fundo quente de Âmbar e Baunilha, criando uma essência marcante e inesquecível.",
        notes: "Notas de topo: Mandarina e Pêra<br>Notas de coração: Jasmim e Flor de Laranjeira<br>Notas de fundo: Âmbar e Baunilha",
        priceOld: 329.00,
        priceNew: 115.15,
        installmentsPerUnit: 19.19,
        image: "/img/liberte.png",
        deliveryFees: {
          sp: { option1: 3.00, option2: 4.00 },
          southeast: { option1: 5.00, option2: 6.00 },
          other: { option1: 7.00, option2: 8.00 }
        }
      },
      {
        id: "golden",
        name: "VF Golden Desodorante Colônia 75ml - Wepink",
        description: "Fragrância preciosa que transforma momentos em ouro.",
        fullDescription: "VF Golden Desodorante Colônia Wepink é uma fragrância que evoca luxo e sofisticação. Com um caminho olfativo Âmbar Floral, inicia com notas de Pêssego e Maçã, passa por um coração floral de Rosa e Jasmim, e finaliza com um fundo rico de Âmbar e Sândalo, transformando cada momento em uma experiência dourada.",
        notes: "Notas de topo: Pêssego e Maçã<br>Notas de coração: Rosa e Jasmim<br>Notas de fundo: Âmbar e Sândalo",
        priceOld: 329.00,
        priceNew: 115.15,
        installmentsPerUnit: 19.19,
        image: "/img/golden.png",
        deliveryFees: {
          sp: { option1: 3.00, option2: 4.00 },
          southeast: { option1: 5.00, option2: 6.00 },
          other: { option1: 7.00, option2: 8.00 }
        }
      },
      {
        id: "obsessed",
        name: "Obsessed Desodorante Colônia 100ml - Wepink",
        description: "A elegância do mistério em uma essência única.",
        fullDescription: "Obsessed Desodorante Colônia Wepink é uma fragrância que captura o mistério e a elegância. Com um caminho olfativo Oriental Amadeirado, inicia com notas de Cardamomo e Pimenta Rosa, evolui para um coração de Lavanda e Gerânio, e finaliza com um fundo profundo de Patchouli e Âmbar, criando uma essência envolvente e inesquecível.",
        notes: "Notas de topo: Cardamomo e Pimenta Rosa<br>Notas de coração: Lavanda e Gerânio<br>Notas de fundo: Patchouli e Âmbar",
        priceOld: 329.00,
        priceNew: 115.15,
        installmentsPerUnit: 19.19,
        image: "/img/obsessed.png",
        deliveryFees: {
          sp: { option1: 3.00, option2: 4.00 },
          southeast: { option1: 5.00, option2: 6.00 },
          other: { option1: 7.00, option2: 8.00 }
        }
      },
      {
        id: "vf",
        name: "VF Bloom Desodorante Colônia 75ml - Wepink",
        description: "Beleza no sutil florescer do aroma.",
        fullDescription: "VF Bloom Desodorante Colônia Wepink é uma fragrância que celebra a beleza do florescer. Com um caminho olfativo Floral Cítrico, inicia com notas frescas de Limão Siciliano e Laranja, evolui para um coração de Peônia e Lírio, e finaliza com um fundo suave de Almíscar e Cedro, trazendo frescor e delicadeza a cada aplicação.",
        notes: "Notas de topo: Limão Siciliano e Laranja<br>Notas de coração: Peônia e Lírio<br>Notas de fundo: Almíscar e Cedro",
        priceOld: 329.00,
        priceNew: 115.15,
        installmentsPerUnit: 19.19,
        image: "/img/vf.png",
        deliveryFees: {
          sp: { option1: 3.00, option2: 4.00 },
          southeast: { option1: 5.00, option2: 6.00 },
          other: { option1: 7.00, option2: 8.00 }
        }
      },
      {
        id: "seduce",
        name: "VF Seduce Desodorante Colônia 75ml - Wepink",
        description: "Aura de magnetismo e sedução envolvente.",
        fullDescription: "VF Seduce Desodorante Colônia Wepink é uma fragrância que exala magnetismo e sedução. Com um caminho olfativo Floral Gourmand, inicia com notas doces de Caramelo e Framboesa, evolui para um coração de Rosa e Violeta, e finaliza com um fundo quente de Baunilha e Tonka, criando uma aura irresistível.",
        notes: "Notas de topo: Caramelo e Framboesa<br>Notas de coração: Rosa e Violeta<br>Notas de fundo: Baunilha e Tonka",
        priceOld: 329.00,
        priceNew: 115.15,
        installmentsPerUnit: 19.19,
        image: "/img/seduce.png",
        deliveryFees: {
          sp: { option1: 3.00, option2: 4.00 },
          southeast: { option1: 5.00, option2: 6.00 },
          other: { option1: 7.00, option2: 8.00 }
        }
      },
      {
        id: "therainy",
        name: "The Rainy Desodorante Colônia 75ml - Wepink",
        description: "Mergulhe na essência refrescante da natureza!",
        fullDescription: "The Rainy Desodorante Colônia Wepink traz a essência refrescante da natureza. Com um caminho olfativo Cítrico Aquático, inicia com notas de Limão e Notas Aquáticas, evolui para um coração de Menta e Jasmim, e finaliza com um fundo de Almíscar e Madeiras Brancas, trazendo uma sensação de frescor e serenidade.",
        notes: "Notas de topo: Limão e Notas Aquáticas<br>Notas de coração: Menta e Jasmim<br>Notas de fundo: Almíscar e Madeiras Brancas",
        priceOld: 329.00,
        priceNew: 115.15,
        installmentsPerUnit: 19.19,
        image: "/img/therainy.png",
        deliveryFees: {
          sp: { option1: 3.00, option2: 4.00 },
          southeast: { option1: 5.00, option2: 6.00 },
          other: { option1: 7.00, option2: 8.00 }
        }
      },
      {
        id: "celebrate",
        name: "Celebrate Life Desodorante Colônia 100ml - Wepink",
        description: "Comemore a vida com um aroma extraordinário.",
        fullDescription: "Celebrate Life Desodorante Colônia Wepink é uma fragrância que celebra a alegria de viver. Com um caminho olfativo Frutado Gourmand, inicia com notas de Maçã e Cassis, evolui para um coração de Praliné e Jasmim, e finaliza com um fundo doce de Baunilha e Caramelo, trazendo uma explosão de felicidade em cada borrifada.",
        notes: "Notas de topo: Maçã e Cassis<br>Notas de coração: Praliné e Jasmim<br>Notas de fundo: Baunilha e Caramelo",
        priceOld: 329.00,
        priceNew: 115.15,
        installmentsPerUnit: 19.19,
        image: "/img/celebrate.png",
        deliveryFees: {
          sp: { option1: 3.00, option2: 4.00 },
          southeast: { option1: 5.00, option2: 6.00 },
          other: { option1: 7.00, option2: 8.00 }
        }
      }
    ];

    let products = [];
    let orders = [];

    // Função para formatar valores monetários
    function formatCurrency(value) {
      return `R$ ${value.toFixed(2).replace('.', ',')}`;
    }

    // Função para salvar produtos no localStorage
    function saveProductsToStorage() {
      localStorage.setItem('wepink_products', JSON.stringify(products));
      console.log('Produtos salvos no localStorage:', products);
    }

    // Função para carregar produtos do localStorage
    function loadProductsFromStorage() {
      try {
        const storedProducts = JSON.parse(localStorage.getItem('wepink_products'));
        if (storedProducts && Array.isArray(storedProducts) && storedProducts.length > 0) {
          products = storedProducts;
          console.log('Produtos carregados do localStorage:', products);
        } else {
          products = defaultProducts;
          localStorage.setItem('wepink_products', JSON.stringify(products));
          console.log('Produtos inicializados com defaultProducts:', products);
        }
      } catch (error) {
        console.error('Erro ao carregar produtos do localStorage:', error);
        products = defaultProducts;
        localStorage.setItem('wepink_products', JSON.stringify(products));
        console.log('Produtos inicializados com defaultProducts após erro:', products);
      }
      renderProductList();
    }

    // Função para renderizar a lista de produtos
    function renderProductList() {
      const productTableBody = document.getElementById('product-table-body');
      productTableBody.innerHTML = '';
      products.forEach(product => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${product.name}</td>
          <td><img src="${product.image}" alt="${product.name}"></td>
          <td>${product.description}</td>
          <td>${formatCurrency(product.priceOld)}</td>
          <td>${formatCurrency(product.priceNew)}</td>
          <td>
            <button onclick="editProduct('${product.id}')">Editar</button>
            <button onclick="deleteProduct('${product.id}')">Excluir</button>
          </td>
        `;
        productTableBody.appendChild(row);
      });
    }

    // Função para mostrar o modal de adicionar/editar produto
    function showAddProductModal() {
      document.getElementById('modal-title').innerText = 'Adicionar Produto';
      document.getElementById('product-form').reset();
      document.getElementById('product-modal').style.display = 'flex';
    }

    // Função para editar um produto
    function editProduct(productId) {
      const product = products.find(p => p.id === productId);
      if (product) {
        document.getElementById('modal-title').innerText = 'Editar Produto';
        document.getElementById('product-id').value = product.id;
        document.getElementById('product-name').value = product.name;
        document.getElementById('product-description').value = product.description;
        document.getElementById('product-full-description').value = product.fullDescription;
        document.getElementById('product-notes').value = product.notes;
        document.getElementById('product-price-old').value = product.priceOld;
        document.getElementById('product-price-new').value = product.priceNew;
        document.getElementById('product-installments').value = product.installmentsPerUnit;
        document.getElementById('product-image').value = product.image;
        document.getElementById('delivery-sp-option1').value = product.deliveryFees.sp.option1;
        document.getElementById('delivery-sp-option2').value = product.deliveryFees.sp.option2;
        document.getElementById('delivery-southeast-option1').value = product.deliveryFees.southeast.option1;
        document.getElementById('delivery-southeast-option2').value = product.deliveryFees.southeast.option2;
        document.getElementById('delivery-other-option1').value = product.deliveryFees.other.option1;
        document.getElementById('delivery-other-option2').value = product.deliveryFees.other.option2;
        document.getElementById('product-modal').style.display = 'flex';
      }
    }

    // Função para excluir um produto
    function deleteProduct(productId) {
      if (confirm('Tem certeza que deseja excluir este produto?')) {
        products = products.filter(p => p.id !== productId);
        saveProductsToStorage();
        renderProductList();
      }
    }

    // Função para fechar o modal
    function closeModal() {
      document.getElementById('product-modal').style.display = 'none';
      document.getElementById('product-form').reset();
    }

    // Manipular o envio do formulário de produto
    document.getElementById('product-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const productId = document.getElementById('product-id').value;
      const product = {
        id: productId,
        name: document.getElementById('product-name').value,
        description: document.getElementById('product-description').value,
        fullDescription: document.getElementById('product-full-description').value,
        notes: document.getElementById('product-notes').value,
        priceOld: parseFloat(document.getElementById('product-price-old').value),
        priceNew: parseFloat(document.getElementById('product-price-new').value),
        installmentsPerUnit: parseFloat(document.getElementById('product-installments').value),
        image: document.getElementById('product-image').value,
        deliveryFees: {
          sp: {
            option1: parseFloat(document.getElementById('delivery-sp-option1').value),
            option2: parseFloat(document.getElementById('delivery-sp-option2').value)
          },
          southeast: {
            option1: parseFloat(document.getElementById('delivery-southeast-option1').value),
            option2: parseFloat(document.getElementById('delivery-southeast-option2').value)
          },
          other: {
            option1: parseFloat(document.getElementById('delivery-other-option1').value),
            option2: parseFloat(document.getElementById('delivery-other-option2').value)
          }
        }
      };

      const existingProductIndex = products.findIndex(p => p.id === productId);
      if (existingProductIndex !== -1) {
        products[existingProductIndex] = product;
      } else {
        products.push(product);
      }

      saveProductsToStorage();
      renderProductList();
      closeModal();
    });

    // Função para renderizar a lista de pedidos
    function renderOrderList() {
      const orderTableBody = document.getElementById('order-table-body');
      orderTableBody.innerHTML = '';
      orders.forEach(order => {
        const product = products.find(p => p.id === order.productId) || { name: 'Produto Desconhecido', image: 'https://via.placeholder.com/50' };
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${order.id}</td>
          <td>${order.customer}</td>
          <td><img src="${product.image}" alt="${product.name}">${product.name}</td>
          <td>${formatCurrency(order.value)}</td>
          <td>${order.status}</td>
          <td>
            <button onclick="updateOrderStatus('${order.id}', 'Aprovado')">Aprovar</button>
            <button onclick="updateOrderStatus('${order.id}', 'Cancelado')">Cancelar</button>
          </td>
        `;
        orderTableBody.appendChild(row);
      });
    }

    // Função para atualizar o status de um pedido
    function updateOrderStatus(orderId, status) {
      const order = orders.find(o => o.id === orderId);
      if (order) {
        order.status = status;
        localStorage.setItem('wepink_orders', JSON.stringify(orders));
        renderOrderList();
        updateStats();
      }
    }

    // Função para atualizar as estatísticas
    function updateStats() {
      const activeUsers = parseInt(localStorage.getItem('accessCount')) || 0;
      const pendingOrders = orders.filter(o => o.status === 'Pendente').length;
      const totalRevenue = orders
        .filter(o => o.status === 'Aprovado')
        .reduce((sum, order) => sum + order.value, 0);

      document.getElementById('active-users').innerText = activeUsers;
      document.getElementById('pending-orders').innerText = pendingOrders;
      document.getElementById('total-revenue').innerText = formatCurrency(totalRevenue);
    }

    // Carregar produtos e pedidos ao iniciar a página
    loadProductsFromStorage();
    orders = JSON.parse(localStorage.getItem('wepink_orders')) || [];
    renderOrderList();
    updateStats();
  </script>
</body>
</html>
